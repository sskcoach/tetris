# 터미널에서 Gemini CLI로 테트리스 만들기

이 튜토리얼은 Gemini CLI와 함께 Python을 사용하여 클래식 테트리스 게임을 처음부터 만들어보는 과정을 안내합니다. 간단한 블록 출력부터 시작하여 게임의 핵심 로직과 UI를 단계별로 완성해 나갑니다.

## 목차

1.  [Step 1: 기본 블록 정의와 출력](#step-1-기본-블록-정의와-출력)
2.  [Step 2: 블록 회전시키기](#step-2-블록-회전시키기)
3.  [Step 3: 게임 보드 만들기](#step-3-게임-보드-만들기)
4.  [Step 4: 상태 머신과 게임의 기본 구조](#step-4-상태-머신과-게임의-기본-구조)
5.  [Step 5: 게임 루프와 중력 구현](#step-5-게임-루프와-중력-구현)
6.  [Step 6: 실시간 사용자 입력 처리](#step-6-실시간-사용자-입력-처리)
7.  [Step 7: 핵심 게임 로직 (충돌, 줄 제거)](#step-7-핵심-게임-로직-충돌-줄-제거)
8.  [Step 8: UI/UX 개선 (미리보기, 깜박임 제거)](#step-8-uiux-개선-미리보기-깜박임-제거)
9.  [부록: 개발 과정에서의 교훈](#부록-개발-과정에서의-교훈)

---

### Step 1: 기본 블록 정의와 출력

모든 테트리스 게임의 시작은 7가지 종류의 블록, 즉 테트로미노를 정의하는 것입니다. 우리는 파이썬의 딕셔너리(Dictionary)를 사용하여 각 블록의 이름과 모양을 저장합니다. 모양은 2차원 리스트로 표현하며, `[]`는 블록의 실제 부분을, `  `(공백 2칸)은 빈 공간을 의미합니다.

```python
TETROMINOS = {
    'I': [['  ', '[]', '  ', '  '], ['  ', '[]', '  ', '  '], ['  ', '[]', '  ', '  '], ['  ', '[]', '  ', '  ']],
    'O': [['[]', '[]'], ['[]', '[]']],
    'T': [['  ', '[]', '  '], ['[]', '[]', '[]'], ['  ', '  ', '  ']],
    # ... 나머지 블록들
}
```

초기에는 이 데이터 구조를 간단한 `for` 루프와 `print()` 함수를 통해 터미널에 그대로 출력하여 각 블록의 모양을 확인하는 것부터 시작했습니다.

### Step 2: 블록 회전시키기

테트리스의 핵심 기능 중 하나는 블록 회전입니다. 2차원 리스트로 표현된 블록을 시계 방향으로 90도 회전시키는 로직이 필요합니다. 이는 행렬의 '전치(Transpose)'와 '뒤집기(Reverse)' 연산을 통해 구현할 수 있습니다.

`zip(*block)`은 2D 리스트의 행과 열을 뒤집어(전치) 튜플의 리스트를 만듭니다. 그 후 각 행(튜플)을 `[::-1]` 슬라이싱으로 뒤집어주면 시계 방향 회전이 완성됩니다.

```python
def rotate_clockwise(block):
    return [list(row[::-1]) for row in zip(*block)]
```

이 함수를 이용해 각 블록의 4가지 회전 형태를 모두 화면에 출력하며 기능이 올바르게 작동하는지 확인했습니다.

### Step 3: 게임 보드 만들기

이제 블록이 놓일 게임 보드를 만들 차례입니다. 보드 역시 20x10 크기의 2차원 리스트로 표현할 수 있습니다. `create_empty_board` 함수는 보드를 생성하고, 초기에는 `.` 문자로, 나중에는 레트로 느낌을 살리기 위해 ` .`으로 빈칸을 채웠습니다.

보드를 화면에 그리는 `format_board` 함수는 보드 데이터에 벽(◀, ▶)과 바닥 그래픽을 추가하여 완전한 게임 화면 문자열을 만듭니다.

```python
BOARD_WIDTH = 10
BOARD_HEIGHT = 20

def create_empty_board(width, height):
    # ANSI 코드를 사용하여 빈 칸의 점도 녹색으로 표현
    return [['\x1b[32m .\x1b[0m' for _ in range(width)] for _ in range(height)]

def format_board(board):
    # 벽과 바닥도 녹색으로 꾸며줌
    lines = [